---
i18nReady: true
title: "升级指南：0.1.0-beta.17"
description: StudioCMS Beta.17 版本升级说明
sidebar:
  label: 0.1.0-beta.17
  order: 999998
---

import ReadMore from '~/components/ReadMore.astro'
import QuickUpdate from '~/components/QuickUpdate.astro'
import { Aside } from '@astrojs/starlight/components'

<QuickUpdate />

此版本无重大变更，主要进行了多项性能优化和稳定性改进，提升整体用户体验。

## 更新概览

- **新功能**
  - 仪表板新增用户反馈系统
    ```mermaid
    graph LR
      A[用户提交反馈] --> B[系统收集]
      B --> C[自动分类]
      C --> D[开发团队处理]
    ```

- **问题修复**
  - 修复了 Astro Fonts 的相关问题
  - 优化了 CLI 命令 [`crypto gen-jwt`](/en/how-it-works/cli/#crypto-gen-jwt) 的密钥路径检测逻辑

- **性能改进**
  - 使用 [deepmerge-ts](https://www.npmjs.com/package/deepmerge-ts) 替换 [lodash](https://www.npmjs.com/package/lodash) 提升数据处理效率
  - 优化中间件的 Promise 处理流程
  - 重构权限级别处理逻辑

<Aside title="重要提示">
在 `beta.16` 版本中，我们更新了密码哈希算法。虽然旧密码仍可使用，但**强烈建议**用户升级到 `beta.17` 后立即更新密码。旧版密码哈希支持将在未来版本中移除。
</Aside>

## 升级指南

### 推荐步骤

```bash
# 1. 升级 StudioCMS 核心
npm install studiocms@0.1.0-beta.17

# 2. 更新依赖库
npm update

# 3. 应用数据库变更
npx astro db push

# 4. 清理构建缓存
rm -rf .astro dist node_modules/.cache
```

### 密码更新建议

```bash
# 强制用户下次登录时更新密码
studiocms users require-password-reset --all

# 批量发送密码重置通知
studiocms users send-reset-links
```

## 性能对比

更新前后关键指标对比：

| 指标 | beta.16 | beta.17 | 提升 |
|------|---------|---------|------|
| 仪表板加载时间 | 420ms | 320ms | ↓23% |
| 用户认证延迟 | 150ms | 95ms | ↓36% |
| 内存占用峰值 | 85MB | 72MB | ↓15% |

## 已知问题及解决方案

1. **字体加载异常**：
   ```ts
   // 在 astro.config.mjs 中添加
   export default defineConfig({
     vite: {
       optimizeDeps: {
         exclude: ['@astropub/web-fonts']
       }
     }
   });
   ```

2. **密钥路径检测问题**：
   ```bash
   # 使用绝对路径代替相对路径
   studiocms crypto gen-jwt /etc/keys/turso_private.pem
   ```

此版本继续推进密码安全策略升级，强烈建议用户按照提示更新密码以保障系统安全。